language: rust

env:
  global:
    - PATH="$HOME/.cargo/bin:$PATH"

matrix:
  include:
    - os: linux
      rust: stable
      env: TARGET=x86_64-unknown-linux-gnu
    - os: linux
      rust: stable
      env: TARGET=x86_64-unknown-linux-musl
    - os: osx
      rust: stable
      env: TARGET=x86_64-apple-darwin

    - os: linux
      rust: beta
      env: TARGET=x86_64-unknown-linux-gnu
    #- os: linux
    #  rust: beta
    #  env: TARGET=x86_64-unknown-linux-musl
    - os: osx
      rust: beta
      env: TARGET=x86_64-apple-darwin

    - os: linux
      rust: nightly
      env: TARGET=x86_64-unknown-linux-gnu
    #- os: linux
    #  rust: nightly
    #  env: TARGET=x86_64-unknown-linux-musl
    - os: osx
      rust: nightly
      env: TARGET=x86_64-apple-darwin

install:
  - ./ci/travis_setup.sh

script:
  - ./ci/travis_build.sh
